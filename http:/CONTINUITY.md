- Goal (incl. success criteria):
  - Harden Streamlit Cloud deployment and make Conway study inputs driven by canonical CSV/XLSX derived from `Conway Meta/data.Rdata`, with validated schema, editable template, rebuild artifacts runner, updated app upload flow, and pytest passing.
- Constraints/Assumptions:
  - Follow Conway difference definition (PaCO2 − TcCO2) and authority hierarchy (Conway paper → docs/SPEC.md/DECISIONS.md → Stata).
  - Route-1 study-level bootstrap required for parameter uncertainty.
  - Do not modify `Code/Legacy/` or `Drafts/` and avoid large/patient-level data.
  - Use Python under `python/`, keep core math pure, update artifacts, run `pytest`, and prepare git add/commit commands.
- Key decisions:
  - Canonical Conway inputs live in `Data/conway_studies.csv`/`.xlsx`, with export script using `data.Rdata` (pyreadr) and appending Bolliger 2007 ICU row if missing.
  - Streamlit app recomputes bootstrap draws per subgroup from the canonical table (uploaded overrides) and uses root `streamlit_app.py` entrypoint.
- State:
  - Implemented canonical tables, export/validation/docs/scripts, Streamlit upload + caching, deployment scaffolding, tests, and regenerated artifacts; `pytest -q` fails in sandbox with no output.
- Done:
  - Created `Data/conway_studies.csv`/`.xlsx` and `Data/conway_studies_template.xlsx`.
  - Added `scripts/export_conway_rdata.py` and `scripts/rebuild_artifacts.py`.
  - Added `python/src/tcco2_accuracy/validate_inputs.py` and updated Conway loaders to use canonical tables + subgroup flags.
  - Updated Streamlit app to allow uploads, cached bootstrap draws, and PI labeling; added root `streamlit_app.py` entrypoint.
  - Added deployment/docs updates (`docs/CONWAY_DATA_SCHEMA.md`, `docs/ADDING_STUDIES.md`, `docs/DEPLOY_STREAMLIT_CLOUD.md`).
  - Added requirements/config scaffolding and new tests for validation/export/upload behavior.
  - Regenerated artifacts via `python scripts/rebuild_artifacts.py --seed 202401 --n-boot 1000`.
- Now:
  - Summarize changes and report pytest sandbox failure.
- Next:
  - Provide git add/commit commands; user to rerun pytest if needed.
- Open questions (UNCONFIRMED if needed):
  - Whether `pyreadr` wheels install cleanly on Streamlit Cloud.
- Working set (files/ids/commands):
  - `Data/conway_studies.csv`
  - `Data/conway_studies.xlsx`
  - `Data/conway_studies_template.xlsx`
  - `scripts/export_conway_rdata.py`
  - `scripts/rebuild_artifacts.py`
  - `python/src/tcco2_accuracy/data.py`
  - `python/src/tcco2_accuracy/validate_inputs.py`
  - `app/streamlit_app.py`
  - `streamlit_app.py`
  - `requirements.txt`
  - `.streamlit/config.toml`
  - `docs/CONWAY_DATA_SCHEMA.md`
  - `docs/ADDING_STUDIES.md`
  - `docs/DEPLOY_STREAMLIT_CLOUD.md`
  - `python/tests/test_validate_inputs.py`
  - `python/tests/test_export_conway_rdata.py`
  - `python/tests/test_uploaded_table.py`
  - `artifacts/*`
